<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<head>
  <link rel="stylesheet" href="styles.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/v-tooltip"></script>


  <title>Realm Grinder Template Viewer</title>
  <meta property="og:title" content="Realm Grinder Template Viewer" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://lippiod.github.io/rg-template-viewer/" />
</head>


<div id="template-viewer">
  <h1>Realm Grinder Template Viewer</h1>
  <div id="config-zone">
    <textarea style="display:block" id="template" rows="8" cols="50" v-model.lazy="templateText" placeholder="Enter template text here"></textarea>
    <button type="button" @click="importBtn(true)">import</button>
    <button type="button" @click="exportBtn(true)">export</button>
    <button type="button" @click="clearBtn('string')">clear text</button>
    <button type="button" @click="clearBtn('select')">clear selection</button>
    <!--<v-popover>
      <button class="tooltip-target b3" auto-hide>generate html</button>
      <template slot="popover">
        <form>
          <button type="button" @click="resetForm">Reset to default</button>
          <button type="button" @click="exportBtn(false)">Preview html</button>
          <div>
            <p><strong>Build name</strong></p>
            <p></p>
            <input class="form-long" v-model="outputHtml.name">
          </div>
          <div>
            <p><strong>Build info</strong></p>
            <p></p>
            <div v-for="(item, ind) in outputHtml.desc" :key="ind">
              <button type="button" @click="addRow('desc', ind)">+</button>
              <button type="button" @click="delRow('desc', ind)">-</button>
              <input class="form-left" v-model="item.name">:
              <input class="form-right" v-model="item.value">
            </div>
          </div>
          <div>
            <p><strong>Build notes</strong></p>
            <p></p>
            <div v-for="(item, ind) in outputHtml.note" :key="ind">
              <button type="button" @click="addRow('note', ind)">+</button>
              <button type="button" @click="delRow('note', ind)">-</button>
              <input class="form-left" v-model="item.name">:
              <input class="form-right" v-model="item.value">
            </div>
          </div>
        </form>
      </template>
    </v-popover>-->
    <!--<div class="config-section">
      <h3>Import build from <a target="_blank" href="http://musicfamily.org/realm/">Not a Wiki</a>:</h3>
      <div class="text-container">
        <div class="config">
          <label for="naw-section">Page:</label>
          <select id="naw-section" v-model="nawPage">
            <option value="" disabled>---Please select a section---</option>
            <option v-for="(item, ind) in nawPageList" :value="ind" :key="ind">{{ item.text }}</option>
          </select>
          <a v-show="nawPage.length>0" target="_blank" :href="pageUrl">Go to build page</a>
        </div>
        <div class="config">
          <label for="naw-build">Build:</label>
          <select id="naw-build" v-model="nawBuildId">
            <option value="" disabled>---Please select a build---</option>
            <optgroup v-for="(cat, cId) in nawCategory" :key="cId" :label="cat.name">
              <option v-for="(item, ind) in cat.buildList" :value="[cId, ind]" :key="ind">{{ item }}</option>
            </optgroup>
          </select>
        </div>
        <div id="build-content" v-html="buildHtml"></div>
      </div>
    </div>-->
    <div class="config-section">
      <h3>Configuration</h3>
      <div class="text-container">
        <div class="config">
          <label for="reincarnation">Reincarnation:</label>
          <input type="number" min="16" max="190" id="reincarnation" v-model.lazy.number="rein">
          <span>Research Points: {{ getRps }}</span>
        </div>
        <div class="config">
          <label for="base-faction">Faction:</label>
          <select id="base-faction" v-model="faction" class="color-select" :class="colorSelected">
            <option></option>
            <option v-for="(item, ind) in baseFactions" :key="ind" :value="item.abbr" :class="item.color">{{ item.name }}</option>
          </select>
          <input type="checkbox" id="prestige" v-model="prestige">
          <label for="prestige">prestige</label>
          <input type="checkbox" id="elite" v-model="elite">
          <label for="elite">elite</label>
        </div>
        <div class="config" v-show="rein>=23 && rein<40">
          <input type="checkbox" id="has-ancient-device" v-model="checkAncientDevice">
          <label for="has-ancient-device">Ancient Device</label>
        </div>
        <div class="config" v-show="rein>=29 && rein<40">
          <input type="checkbox" id="has-flame-horn" v-model="checkFlameHorn">
          <label for="has-flame-horn">Horn of the Kings / Flame of Bondelnar</label>
        </div>
        <div class="config">
          <div v-show="faction=='MC'">
            <div>
              <span>Alignment 1:</span>
              <input type="radio" id="good" value="good" v-model="mercUpgrades.align[0]">
              <label for="good">Good</label>
              <input type="radio" id="evil" value="evil" v-model="mercUpgrades.align[0]">
              <label for="evil">Evil</label>
              <input type="radio" id="neutral" value="neutral" v-model="mercUpgrades.align[0]">
              <label for="neutral">Neutral</label>
            </div>
            <div v-show="showA3">
              <span>Alignment 2:</span>
              <input type="radio" id="order" value="order" v-model="mercUpgrades.align[1]">
              <label for="order">Order</label>
              <input type="radio" id="chaos" value="chaos" v-model="mercUpgrades.align[1]">
              <label for="chaos">Chaos</label>
              <input type="radio" id="balance" value="balance" v-model="mercUpgrades.align[1]">
              <label for="balance">Balance</label>
            </div>
          </div>
        </div>
        <div class="config">
          <div v-show="rein>=130 && rein<160 && faction.length">
            <span>Archon bloodline:</span>
            <input type="radio" id="ar-blood" value="bloodline" v-model="archonBlood">
            <label for="ar-blood">Yes</label>
            <input type="radio" id="ar-rch" value="A400" v-model="archonBlood">
            <label for="ar-rch">{{ isArchon400 ? 'A400' : 'No' }}</label>
            <div v-show="archonBlood=='bloodline' || hasBloodSpring && isArchon400">
              <span>Effect:</span>
              <input type="number" min="1" max="100" v-model.lazy.number="slotAdd" style="width:40px">
              <span>additional slots.</span>
              <span v-show="slotAdd * (slotAdd - 1) > 0">Need {{ slotAdd * (slotAdd - 1) }} days spent this game</span><br>
            </div>
          </div>
        </div>
        <div class="config" v-show="showA3">
          <p>{{ pointsUsed }} points used.<span v-show="pointsUsed>budgets"><br>Need <strong>{{ requiredTime }}</strong> spent this game with Archon bloodline (bloodline upgrade, A400, A2950, or D5875)</span></p>
        </div>
      </div>
    </div>
  </div>
  <div style="float:right;margin-bottom:10px">
    <a target="_blank" href="http://musicfamily.org/realm/FactionUpgrades/">Faction Upgrades</a>
    <a target="_blank" href="http://musicfamily.org/realm/Researchtree/">Research Tree</a>
  </div>
  <div class="container">
    <h3 class="accordion" @click="unfoldUpgrade = !unfoldUpgrade">Faction Upgrades<span  class="tri-symbol">{{ unfoldUpgrade ? "▲" : "▼" }} </span></h3>
    <div id="upgrade-panel" v-show="unfoldUpgrade">
      <div class="config" v-show="faction=='MC'">
        <input type="radio" id="upg-all" value="0" v-model="upgradeDisplay">
        <label for="upg-all">All</label>
        <input type="radio" id="upg-t1" value="1" v-model="upgradeDisplay">
        <label for="upg-t1">Tier 1</label>
        <input type="radio" id="upg-t2" value="2" v-model="upgradeDisplay">
        <label for="upg-t2">Tier 2</label>
        <input type="radio" id="upg-t3" value="3" v-model="upgradeDisplay">
        <label for="upg-t3">Tier 3</label>
        <input type="radio" id="upg-t4" value="4" v-model="upgradeDisplay">
        <label for="upg-t4">Tier 4</label><br>
        <input type="radio" id="upg-good" value="5" v-model="upgradeDisplay">
        <label for="upg-good">Good</label>
        <input type="radio" id="upg-evil" value="6" v-model="upgradeDisplay">
        <label for="upg-evil">Evil</label>
        <input type="radio" id="upg-sel" value="7" v-model="upgradeDisplay">
        <label for="upg-sel">Selected</label>
      </div>
      <div class="fac-upgrades">
        <upgrade v-for="(item, key) in nawFacUpg" :key="key" :upg-tooltip="item" :id="key"  :disp="upgradeDisplay"></upgrade>
      </div>
    </div>
    <h3 class="accordion" @click="unfoldRtree = !unfoldRtree">Research Tree<span class="tri-symbol">{{ unfoldRtree ? "▲" : "▼" }} </span></h3>
    <div id="research-tree" v-show="unfoldRtree">
      <div class="config">
        <input type="checkbox" id="hide-research" v-model="hideResearch">
        <label for="hide-research">hide unavailable researches</label>
      </div>
      <div class="research-branch">
        <div id="Spellcraft" class="facility" @click="selectFree('Spellcraft')" v-tooltip="{ content: facTooltip.Spellcraft, html: true }"></div>
        <div class="researches">
          <research v-for="item in rTreeData.Spellcraft" :key="item.id" :rch-tooltip="nawRchTree[item.id]" v-bind="[item, mercTrigger]" :change="rchChange[item.id]" @change-done="changeDone" @res-change="resChange" @set-available="setAvailable" :rch-selected="researchSelected.Spellcraft"></research>
        </div>
      </div>
      <div class="research-branch">
        <div id="Craftsmanship" class="facility" @click="selectFree('Craftsmanship')" v-tooltip="{ content: facTooltip.Craftsmanship, html: true }"></div>
        <div class="researches">
          <research v-for="item in rTreeData.Craftsmanship" :key="item.id" :rch-tooltip="nawRchTree[item.id]" v-bind="[item, mercTrigger]" :change="rchChange[item.id]" @change-done="changeDone" @res-change="resChange" @set-available="setAvailable" :rch-selected="researchSelected.Craftsmanship"></research>
        </div>
      </div>
      <div class="research-branch">
        <div id="Divine" class="facility" @click="selectFree('Divine')" v-tooltip="{ content: facTooltip.Divine, html: true }"></div>
        <div class="researches">
          <research v-for="item in rTreeData.Divine" :key="item.id" :rch-tooltip="nawRchTree[item.id]" v-bind="[item, mercTrigger]" :change="rchChange[item.id]" @change-done="changeDone" @res-change="resChange" @set-available="setAvailable" :rch-selected="researchSelected.Divine"></research>
        </div>
      </div>
      <div class="research-branch">
      <div id="Economics" class="facility" @click="selectFree('Economics')" v-tooltip="{ content: facTooltip.Economics, html: true }"></div>
        <div class="researches">
          <research v-for="item in rTreeData.Economics" :key="item.id" :rch-tooltip="nawRchTree[item.id]" v-bind="[item, mercTrigger]" :change="rchChange[item.id]" @change-done="changeDone" @res-change="resChange" @set-available="setAvailable" :rch-selected="researchSelected.Economics"></research>
        </div>
      </div>
      <div class="research-branch">
        <div id="Alchemy" class="facility" @click="selectFree('Alchemy')" v-tooltip="{ content: facTooltip.Alchemy, html: true }"></div>
        <div class="researches">
          <research v-for="item in rTreeData.Alchemy" :key="item.id" :rch-tooltip="nawRchTree[item.id]" v-bind="[item, mercTrigger]" :change="rchChange[item.id]" @change-done="changeDone" @res-change="resChange" @set-available="setAvailable" :rch-selected="researchSelected.Alchemy"></research>
        </div>
      </div>
      <div class="research-branch">
        <div id="Warfare" class="facility" @click="selectFree('Warfare')" v-tooltip="{ content: facTooltip.Warfare, html: true }"></div>
        <div class="researches">
          <research v-for="item in rTreeData.Warfare" :key="item.id" :rch-tooltip="nawRchTree[item.id]" v-bind="[item, mercTrigger]" :change="rchChange[item.id]" @change-done="changeDone" @res-change="resChange" @set-available="setAvailable" :rch-selected="researchSelected.Warfare"></research>
        </div>
      </div>
      <div class="research-branch" v-show="rein>=175">
        <div id="Forbidden" class="facility" v-tooltip="{ content: facTooltip.Forbidden, html: true }"></div>
        <div class="researches">
          <research v-for="item in rTreeData.Forbidden" :key="item.id" :rch-tooltip="nawRchTree[item.id]" v-bind="[item, mercTrigger]" :change="rchChange[item.id]" @change-done="changeDone" @res-change="resChange" @set-available="setAvailable" :rch-selected="researchSelected.Forbidden"></research>
        </div>
      </div>
    </div>
    
  </div>
</div>



<script src="index.js"></script>

</html>
